CREATE OR REPLACE WRAPPER JSON ds_json_test
    DATASOURCENAME=ds_json_test
    TUPLEROOT '/JSONFile'
    OUTPUTSCHEMA ("JSONFile" = 'JSONFile' : REGISTER OF (
        "INPUT" = 'INPUT' : 'java.lang.String' (OBL) (DEFAULTVALUE='[{"id":1,"email":"george.bluth@reqres.in","first_name":"George","last_name":"Bluth","avatar":"https://reqres.in/img/faces/1-image.jpg"},{"id":2,"email":"janet.weaver@reqres.in","first_name":"Janet","last_name":"Weaver","avatar":"https://reqres.in/img/faces/2-image.jpg"},{"id":3,"email":"emma.wong@reqres.in","first_name":"Emma","last_name":"Wong","avatar":"https://reqres.in/img/faces/3-image.jpg"},{"id":4,"email":"eve.holt@reqres.in","first_name":"Eve","last_name":"Holt","avatar":"https://reqres.in/img/faces/4-image.jpg"},{"id":5,"email":"charles.morris@reqres.in","first_name":"Charles","last_name":"Morris","avatar":"https://reqres.in/img/faces/5-image.jpg"},{"id":6,"email":"tracey.ramos@reqres.in","first_name":"Tracey","last_name":"Ramos","avatar":"https://reqres.in/img/faces/6-image.jpg"}]') EXTERN,
        "JSONArray" = 'JSONArray' : ARRAY OF (
            "JSONArray" = 'JSONArray' : REGISTER OF (
                id = 'id' : 'java.lang.Integer',
                email = 'email' : 'java.lang.String',
                first_name = 'first_name' : 'java.lang.String',
                last_name = 'last_name' : 'java.lang.String',
                avatar = 'avatar' : 'java.lang.String'
            )
        )
    )
    );

CREATE OR REPLACE TYPE "mad_JSONArray_JSONArray" AS REGISTER OF (id:int, email:text, first_name:text, last_name:text, avatar:text);

CREATE OR REPLACE TYPE "mad_JSONArray" AS ARRAY OF "mad_JSONArray_JSONArray";

CREATE OR REPLACE TABLE bv_json_test I18N au_cst (
        "INPUT":text (extern),
        "JSONArray":"mad_JSONArray"
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD ds_json_test(
        I18N au_cst
        CONSTRAINTS (
             ADD "INPUT" (=) OBL ONE
             ADD "JSONArray" NOS ZERO ()
             ADD "JSONArray" NOS ZERO ()
             ADD "JSONArray".id NOS ZERO ()
             ADD "JSONArray".email NOS ZERO ()
             ADD "JSONArray".first_name NOS ZERO ()
             ADD "JSONArray".last_name NOS ZERO ()
             ADD "JSONArray".avatar NOS ZERO ()
        )
        OUTPUTLIST ("JSONArray"
        )
        WRAPPER (json ds_json_test)
    );

